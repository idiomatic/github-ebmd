html
  body
    h1 github api testbed

    h2 APIs
    p: a(href="https://developer.github.com/v3/") GitHub API
    p: a(href="https://developer.github.com/v3/oauth/") GitHub API OAuth

    h2 Modules
    p: a(href="https://github.com/mikeal/request") request module

    h2 Registration
    p: a(href="https://github.com/settings/applications/99651") github-embd application

    h2 identity
    h2 authentication
    a(href="#{authorize_uri}") authorize
    if access_token
      p access token: #{JSON.stringify(access_token)}
    if repos
      h2 get repositories
      pre
        for repo in repos
          | #{repo.full_name}
          = "\n"
    if orgs
      h2 get your organizations
      pre
        for org in orgs
          | #{org.login}
          = "\n"
    if orgs
      h2 your organization repos
      for org in orgs
        p #{org.login}
        pre
          for repo in org.repos
            | #{repo.full_name}
            if repo.has_issues
              |  (has issues)
            = "\n"
    if orgs
      h2 get milestones
      for org in orgs
        for repo in org.repos
          p #{org.login} #{repo.full_name}
          pre
            for milestone in repo.milestones
              | #{milestone.title} (##{milestone.number})
              = "\n"
    if orgs
      h2 get issues
      for org in orgs
        for repo in org.repos
          for milestone in repo.milestones
            p #{org.login} #{repo.full_name} #{milestone.title}
            pre
              for issue in milestone.issues
                | #{issue.number} #{issue.state} #{issue.title}
                for label in issue.labels
                  |  [#{label.name}]
                = "\n"
    h2 get issue comments
    h2 update milestone description
